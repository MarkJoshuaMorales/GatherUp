<!DOCTYPE html>
<html lang="en">
    {% load static %}
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GatherUp</title>
        <link rel="icon" href="{% static 'img/LogoVer2.png' %}" type="image/png">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    </head>
    <body>
        <header class="header_area">            
            <div class="main_menu">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container d-flex align-items-center justify-content-between">
                        <div class="logo-container d-flex align-items-center">
                            <img style="width: 8%;" src="{% static 'img/Logo.png' %}" class="thumbnail">
                            <a class="navbar-brand logo_h" href="{% url 'user_dashboard' %}" style="text-decoration: none;">
                                <span style="padding-left:10px; color: black; font-size: 180%; font-family: 'Nunito', sans-serif; font-weight: 1000;">
                                    <span style="color: #315098;">GatherUp</span>
                                </span>
                            </a>
                        </div>
                        
                        <div class="navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav ml-auto">
                                
                                <li class="nav-item">
                                    <a class="nav-link notification-icon" href="{% url 'user_notifications' %}">
                                        <i class="bi bi-bell"></i>
                                    </a>
                                </li>
        
                                <li class="nav-item">
                                    <a class="nav-link user-icon" href="{% url 'user_profile' %}">
                                        <i class="bi bi-person-circle"></i>
                                    </a>
                                </li>
        
                                <li class="nav-item">
                                    <a class="nav-link logout-btn" href="{% url 'login' %}?logout=true">
                                        <i class="bi bi-box-arrow-right"></i> Logout
                                    </a>
                                </li>                             
                                                                
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <section class="main-section">
            <div class="white-box">
                <img src="{% static 'img/Generic avatar.png' %}" alt="Profile Picture" class="profile-picture">
                <div class="text-info">
                    {% if user.is_authenticated %}
                        <span class="greeting-text"><b>Hi, {{ user.username }}!</b></span>
                    {% else %}
                        <span class="greeting-text"><b>Hi, user!</b></span>
                    {% endif %}
                    <div class="events-info">
                        <i class="bi bi-mic"></i> Events Hosted: {{ events_hosted }}
                        <span class="events-separator"></span> 
                        <i class="bi bi-ticket-perforated"></i> Events Attended: {{ events_attended }}
                    </div>
                </div>
            </div>

            <div class="upcoming-events">
                <div class="left-text">
                    <h2>Upcoming Events</h2>
                </div>
            </div>
                {% if upcoming_events %}
                    <div class="upcoming-events-display">
                        {% for event in upcoming_events %}
                        <a href="{% url 'user_userregistration' event.pk %}">
                            <div class="event-container">
                                <div class="image-container">
                                    <img src="{{ event.event_image.url }}" alt="Event Image">
                                </div>
                                <div class="event-content">
                                    <div class="event-left">
                                        <div class="event-month">{{ event.event_start|date:"M" }}</div>
                                        <div class="event-day">{{ event.event_start|date:"d" }}</div>
                                    </div>
                                    <div class="event-right">
                                        <div class="event-title">{{ event.event_name }}</div>
                                        <div class="event-host">By {{ event.created_by }}</div>
                                        <div class="event-time">{{ event.event_start|date:"g:i A" }} - {{ event.event_end|date:"g:i A" }}</div>
                                        <div class="event-location">{{ event.event_location }}</div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                    </div>
                {% else %}
                    <div class="middle-text">
                        <h3 style="color: #8CA8BE;">No Upcoming Events</h3>
                        <p>You have no upcoming events. Why not create one?</p>
                    </div>
                    <div class="button-container">
                        <a href="{% url 'user_eventcreation' %}">
                            <button class="create-event-btn">+ Create Event</button>
                        </a>
                    </div>
                {% endif %}
            </div>

            {% if registered_events > 6 %}
                <div class="see-more-container">
                    <button class="see-more-btn">See More</button>
                </div>
            {% endif%}


            <div class="previous-events">
                <div class="left-text">
                    <h2>Previous Events</h2>
                </div>
            </div>    

            {% if past_events %}
                <div class="upcoming-events-display">
                    {% for event in past_events %}
                    <a href="{% url 'user_userregistration' event.pk %}">
                        <div class="event-container">
                            <div class="image-container">
                                <img src="{{ event.event_image.url }}" alt="Event Image">
                            </div>
                            <div class="event-content">
                                <div class="event-left">
                                    <div class="event-month">{{ event.event_start|date:"M" }}</div>
                                    <div class="event-day">{{ event.event_start|date:"d" }}</div>
                                </div>
                                <div class="event-right">
                                    <div class="event-title">{{ event.event_name }}</div>
                                    <div class="event-host">By {{ username }}</div>
                                    <div class="event-time">{{ event.event_start|date:"g:i A" }} - {{ event.event_end|date:"g:i A" }}</div>
                                    <div class="event-location">{{ event.event_location }}</div>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            {% else %}
                <div class="middle-text">
                    <h3 style="color: #8CA8BE;">No Past Events</h3>
                    <p>You have no past events</p>
                </div>
            {% endif %}

            {% if past_events_count > 6 %}
                <div class="see-more-container">
                    <button class="see-more-btn">See More</button>
                </div>
            {% endif%}


        
            
            <footer class="footer">
                <div class="footer-title">
                    <span class="footer-text">Gather</span><span class="footer-text-highlight">Up</span>
                </div>
                <div class="footer-navigation">
                    <a href="/user_dashboard" class="footer-link">Home</a>
                    <a href="/user_profile" class="footer-link">Profile</a>
                </div>
                <div class="footer-divider"></div>
                <div class="footer-copyright">
                    Â©2024 GatherUp. All rights reserved.
                </div>
            </footer>

        </section>

        
       

    </body>
    </html>