<!DOCTYPE html>
<html lang="en">
    {% load static %}
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GatherUp</title>
        <link rel="icon" href="{% static 'img/LogoVer2.png' %}" type="image/png">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="{% static 'css/notifications.css' %}">
    </head>
    <body>
        <header class="header_area">            
            <div class="main_menu">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container d-flex align-items-center justify-content-between">
                        <div class="logo-container d-flex align-items-center">
                            <img style="width: 8%;" src="{% static 'img/Logo.png' %}" class="thumbnail">
                            <a class="navbar-brand logo_h" href="{% url 'user_dashboard' %}" style="text-decoration: none;">
                                <span style="padding-left:10px; color: black; font-size: 180%; font-family: 'Nunito', sans-serif; font-weight: 1000;">
                                    <span style="color: #315098;">GatherUp</span>
                                </span>
                            </a>
                        </div>
                        
                        <div class="navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav ml-auto">
                                
                                <li class="nav-item">
                                    <a class="nav-link notification-icon" href="{% url 'user_notifications' %}">
                                        <i class="bi bi-bell"></i>
                                    </a>
                                </li>
        
                                <li class="nav-item">
                                    <a class="nav-link user-icon" href="{% url 'user_profile' %}">
                                        <i class="bi bi-person-circle"></i>
                                    </a>
                                </li>
        
                                <li class="nav-item">
                                    <a class="nav-link logout-btn" href="{% url 'login' %}?logout=true">
                                        <i class="bi bi-box-arrow-right"></i> Logout
                                    </a>
                                </li>                             
                                                                
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <main>
            <div class="notifications-container">
                <h2>Notifications</h2>
                <div class="notifications" id="all">
                    {% for notification in notifications %}
                        <div class="notification-group">
                            {% if forloop.first or notifications|date:"Y-m-d" != notifications|date:"Y-m-d" %}
                                <h3>{{ notification.created_at|date:"F j, Y" }}</h3>
                            {% endif %}
                            <div class="notification-card {% if not notification.is_read %}unread{% endif %}" 
                                data-unread="{% if not notification.is_read %}true{% else %}false{% endif %}" 
                                onclick="markAsRead(this, {{ notification.id }})">
                                <div class="dot"></div>
                                <div class="content">
                                    <p class="title">{{ notification.title }}</p>
                                    <p class="description">{{ notification.message }}</p>
                                    <p class="time">{{ notification.created_at|timesince }} ago</p>
                                </div>
                            </div>
                        </div>
                    {% empty %}
                        <p class="no-notif">No notifications available.</p>
                    {% endfor %}
                </div>
            </div>
        </main>
        <script src="{% static 'js/notifications.js' %}"></script>
    </body>
    </html>