<!DOCTYPE html>
<html lang="en">
    {% load static %}
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>GatherUp</title>
        <link rel="icon" href="{% static 'img/LogoVer2.png' %}" type="image/png">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="{% static 'css/eventcreation.css' %}">
    </head>
    <body>
        
        <header class="header_area">            
            <div class="main_menu">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <div class="container d-flex align-items-center justify-content-between">
                        <div class="logo-container d-flex align-items-center">
                            <img style="width: 8%;" src="{% static 'img/Logo.png' %}" class="thumbnail">
                            <a class="navbar-brand logo_h" href="{% url 'user_dashboard' %}" style="text-decoration: none;">
                                <span style="padding-left:10px; color: black; font-size: 180%; font-family: 'Nunito', sans-serif; font-weight: 1000;"> 
                                    <span style="color: #315098;">GatherUp</span>
                                </span>
                            </a>
                        </div>
                        
                        <div class="navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav ml-auto">
                                
                                <li class="nav-item">
                                    <a class="nav-link notification-icon" href="{% url 'user_notifications' %}">
                                        <i class="bi bi-bell"></i>
                                    </a>
                                </li>
        
                                <li class="nav-item">
                                    <a class="nav-link user-icon" href="{% url 'user_profile' %}">
                                        <i class="bi bi-person-circle"></i>
                                    </a>
                                </li>
        
                                <li class="nav-item">
                                    <a class="nav-link logout-btn" href="{% url 'login' %}?logout=true">
                                        <i class="bi bi-box-arrow-right"></i> Logout
                                    </a>
                                </li>                             
                                                                
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </header>
    
        <section class="event-creation">
            <form method="POST" action="{% url 'user_eventcreation' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="container">
                    <div class="left-box">
                        <div class="image-box">
                            <img id="photo-preview" src="#" alt="Photo Preview" style="display: none; width: 100%; margin-top: 10px;">
                            <p id="placeholder-text">Insert Event Image Here</p>
                        </div>
                        <div class="upload-photo-container">
                            {{ form.event_image }}                            
                        </div>
                    </div>                    
                    <div class="right-box">
                        <div class="form-item">
                            <div class="item-header"><i class="bi bi-pencil"></i> Event Name</div>
                            {{ form.event_name }}
                        </div>
                        <div class="form-item time-picker">
                            <div class="item-header"><i class="bi bi-clock"></i> Event Start</div>
                            {{ form.event_start }}
                            <hr>
                            <div class="item-header"><i class="bi bi-clock"></i> Event End</div>
                            {{ form.event_end }}
                        </div>
                        <div class="form-item">
                            <div class="item-header"><i class="bi bi-geo-alt"></i> Event Location</div>
                            {{ form.event_location }}
                        </div>
                        <div class="form-item">
                            <div class="item-header"><i class="bi bi-sticky"></i> Event Description</div>
                            {{ form.event_description }}
                        </div>
                        <div class="form-item">
                            <div class="item-header"><i class="bi bi-ticket-perforated"></i> Tickets</div>
                            {{ form.ticket_price }}
                            <hr>
                            <div class="item-header">
                                <i class="bi bi-shield"></i> Private Event
                            </div>
                            <label class="switch">
                                {{ form.is_private }}
                                <span class="slider round"></span>
                            </label>
                            <hr>
                            <div class="item-header"><i class="bi bi-people"></i> Capacity</div>
                            {{ form.event_capacity }}
                        </div>
                        <div class="create-event-btn-container">
                            <button class="create-event-btn" type="submit">+ Create Event</button>
                        </div>
                    </div>
                </div>
            </form>
            
        </section>    

        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const fileInput = document.querySelector('input[type="file"]');
                const photoPreview = document.getElementById('photo-preview');
                const placeholderText = document.getElementById('placeholder-text');
        
                fileInput.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            photoPreview.src = e.target.result;
                            photoPreview.style.display = 'block';
                            placeholderText.style.display = 'none';
                        }
                        reader.readAsDataURL(file);
                    } else {
                        photoPreview.src = '#';
                        photoPreview.style.display = 'none';
                        placeholderText.style.display = 'block';
                    }
                });
            });
        </script>
        <script src="{% static 'js/eventcreation.js' %}"></script>
    </body>
    </html>